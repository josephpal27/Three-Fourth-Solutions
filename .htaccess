# Enable Rewrite Engine
RewriteEngine On

#######################################
# Force HTTPS and non-www
#######################################
RewriteCond %{HTTPS} off [OR]
RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
RewriteRule ^ https://%1%{REQUEST_URI} [L,R=301]

#######################################
# Remove .html from URLs
#######################################
# If user requests /about.html â†’ redirect to /about
RewriteCond %{THE_REQUEST} \s/([^.]+)\.html[\s?] [NC]
RewriteRule ^ %1 [L,R=301]

# Internally serve the .html file when /about is requested
RewriteCond %{REQUEST_FILENAME}.html -f
RewriteRule ^([^/]+)$ $1.html [L]

#######################################
# Block direct access to /assets/
#######################################
RewriteCond %{REQUEST_URI} ^/assets/ [NC]
RewriteRule .* /404.html [L,R=302]

#######################################
# Redirect invalid URLs to custom 404
#######################################
ErrorDocument 404 /404.html
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* /404.html [L,R=302]
